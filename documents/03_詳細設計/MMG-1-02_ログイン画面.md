|ID|画面名|URL|
|----|----|----|
|MMG-1-02|ログイン画面|/login|

## レイアウト
![レイアウト](../02_基本設計/images/MMG-1-02.png)

## 項目一覧
|No|項目名|種類|必須|文字数|文字種|出力|物理名|イベント|画面遷移|補足|
|----|----|----|----|----|----|----|----|----|----|----|
||ロゴ|画像|-|-|-|-|-|-|-|-|
||画面タイトル|テキスト|-|-|-|-|-|-|-|-|
||メールアドレス|テキストボックス|○|~255|メールアドレス形式|-|email|-|-|-|
||パスワード|テキストボックス|○|8~12|半角英数混合|-|password|-|-|-|
||ログインボタン|ボタン||-|-|-|-|E-01|-|-|-|

## イベント一覧
### E-02 ログイン
1. フロントでの各種チェック
    1. 必須項目チェック
        * 未入力項目がある場合、テキストボックス上に赤文字でアラートを表示する。
        * `必須項目です`
2. 会員の存在チェック
    1. 入力したメールアドレスをDBに照会し、存在有無を確認する
        ```SQL
        SELECT COUNT(*) FROM users WHERE email = '{email}' and del_flg = 0;
        ```
    2. メールアドレスが存在しない場合(SQLの結果が1以外)、テキストボックス上に赤文字でアラートを表示して処理を終了する
        * `このメールアドレスは登録されていません`
    3. メールアドレスが存在する場合(SQLの結果が1)、3の処理に進む
3. メールアドレスとパスワードの照合
    1. メールアドレスとパスワードをDBに照会する
        ```SQL
        SELECT COUNT(*) FROM users WHERE email = '{email}' and password = SHA2('{password}', 256) and del_flg = 0;
        ```
        1. SQLの結果が1の場合
            1. 会員IDを取得する
            ```SQL
            SELECT user_id FROM users WHERE email = '{email}';
            ```
            2. `session_login = True` を付与
            3. `session_login_user = user.user_id`を付与
            4.  MMG-1-03_トップページに遷移する
        2. SQLの結果が0以外の場合
            * パスワードテキストボックス上に赤文字でアラートを表示する。
            * `パスワードが間違っています`
4. 処理終了